# Main configuration for Task Management System

# Security settings
security:
  enabled: false
  validation_method: telegram_username
  session_timeout_hours: 24
  refresh_token_days: 7
  admin_only_endpoints:
    - /api/users
    - /api/system/*
  rate_limiting:
    requests_per_minute: 100
    llm_requests_per_day: 50

# PostgreSQL database configuration
db_postgresql:
  enabled: false

# ====== start cron =========
# Cron job configuration for Task Management System
cron:
  enabled: false
  jobs:
    # Deadline notifications
    deadline_notifications:
      schedule: "0 9 * * *"          # Every day at 09:00
      enabled: true
      task: "check_deadlines"
      description: "Check deadlines and send notifications"
    
    # Daily report
    daily_report:
      schedule: "0 18 * * 1-5"       # Monday-Friday at 18:00
      enabled: true
      task: "generate_daily_report"
      description: "Generate daily report"
    
    # Cache cleanup
    cache_cleanup:
      schedule: "0 3 * * *"          # Every day at 03:00
      enabled: true
      task: "cleanup_cache"
      description: "Clean up outdated cache"
    
    # LLM activity analysis
    weekly_analysis:
      schedule: "0 10 * * 1"         # Every Monday at 10:00
      enabled: ${LLM_ENABLED:false}  # Depends on configuration
      task: "weekly_llm_analysis"
      description: "Weekly AI activity analysis"
    
    # External systems synchronization
    telegram_sync:
      schedule: "*/15 * * * *"       # Every 15 minutes
      enabled: true
      task: "sync_telegram_status"
      description: "Synchronize statuses with Telegram"

# Scheduler settings
# Cron schedule examples:
#   "* * * * *"      - Every minute
#   "0 * * * *"      - Every hour at minute 0
#   "0 9 * * *"      - Every day at 9:00 AM
#   "0 18 * * 1-5"   - Monday-Friday at 6:00 PM
#   "*/15 * * * *"   - Every 15 minutes
#   "0 10 * * 1"     - Every Monday at 10:00 AM
#   "0 0 1 * *"      - First day of every month at midnight
#   "@daily"         - Every day at midnight (shortcut)
#   "@hourly"        - Every hour (shortcut)
#   "@weekly"        - Every Sunday at midnight (shortcut)
# Format: "minute hour day month day_of_week"
scheduler:
  timezone: "Europe/Moscow"
  jobstore: "memory"                # or "sqlalchemy"
  thread_pool_size: 5
  misfire_grace_time: 600           # 10 minutes
  coalesce: true                    # Coalesce missed tasks
# ====== end cron =========

# Logging configuration
logging:
  level: INFO
  file_path: ./logs/task_system.log
  max_size_mb: 100
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  retention_days: 30

# Performance settings
performance:
  cache_enabled: true
  cache_ttl_seconds: 300
  csv_read_batch_size: 1000
  worker_processes: 4
  max_file_size_mb: 10

# Telegram integration
telegram:
  bot_token: ${TELEGRAM_BOT_TOKEN}
  webhook_url: https://api.example.com/webhook
  polling_interval: 2

# LLM (Large Language Model) settings
llm:
  enabled: true
  provider: openai
  api_key: ${OPENAI_API_KEY}
  model: gpt-4-turbo-preview
  max_tokens: 2000
  cache_minutes: 60
  timeout_seconds: 60

# Server configuration
server:
  host: 0.0.0.0
  port: 5000
  ssl_enabled: false
  max_connections: 1000
  request_timeout: 30
  cors_origins:
    - https://kanban.example.com
    - http://localhost:3000
  debug: false

# Export settings
export:
  allow_all: true
  csv_export_enabled: true
  max_export_records: 10000
