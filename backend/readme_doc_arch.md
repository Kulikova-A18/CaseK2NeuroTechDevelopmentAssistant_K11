# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Task Management System

```mermaid
graph TB
    subgraph "ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ"
        UI[Web UI / Telegram Bot]
        API[HTTP/REST API]
        WS[WebSocket API]
    end

    subgraph "API Gateway"
        FLASK[Flask Application]
        ROUTES[API Routes]
        MIDDLEWARE[Middleware Layer]
    end

    subgraph "Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°"
        subgraph "ĞœĞ¾Ğ´ÑƒĞ»Ğ¸ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸"
            AUTH[Auth Manager]
            TASKS[Tasks Manager]
            USERS[Users Manager]
            LLM[LLM Analysis]
            CACHE[Cache Manager]
        end
        
        subgraph "Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ"
            MODELS[Pydantic Models]
            VALIDATION[Validation Layer]
        end
    end

    subgraph "Ğ¡Ğ»Ğ¾Ğ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"
        subgraph "Data Managers"
            CSV_MGR[CSV Manager]
            CSV_MGR2[Users CSV]
            CSV_MGR3[Tasks CSV]
            CSV_MGR4[Events CSV]
            CSV_MGR5[Docs CSV]
        end
        
        subgraph "Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ"
            CSV[CSV Files]
            REDIS[(Redis Cache)]
            FILES[File Storage]
        end
    end

    subgraph "Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹"
        CONFIG[Config Manager]
        LOGGING[Logging System]
        UTILS[Utility Functions]
        SOCKETIO[SocketIO Server]
    end

    %% ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑĞ²ÑĞ·Ğ¸
    UI --> API
    UI --> WS
    
    API --> FLASK
    WS --> SOCKETIO
    
    FLASK --> ROUTES
    ROUTES --> MIDDLEWARE
    
    MIDDLEWARE --> AUTH
    MIDDLEWARE --> MODELS
    MIDDLEWARE --> VALIDATION
    
    AUTH --> TASKS
    AUTH --> USERS
    AUTH --> LLM
    
    TASKS --> CSV_MGR3
    USERS --> CSV_MGR2
    
    CSV_MGR2 --> CSV
    CSV_MGR3 --> CSV
    
    CACHE --> REDIS
    
    CONFIG --> AUTH
    CONFIG --> CACHE
    CONFIG --> LOGGING
    
    SOCKETIO --> WS_EVENTS[WebSocket Events]
    WS_EVENTS --> UI
```

## Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### **1. Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ (Presentation Layer)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Web UI    â”‚    â”‚  API Client â”‚    â”‚ Telegram Bot â”‚  â”‚
â”‚  â”‚  (React)    â”‚    â”‚   (Mobile)  â”‚    â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                  â”‚                   â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   REST API  â”‚â—„â”€â”€â”€â”¤   HTTP/1.1  â”‚â—„â”€â”€â”€â”¤  Webhooks    â”‚  â”‚
â”‚  â”‚  (Flask)    â”‚    â”‚             â”‚    â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚ WebSocket   â”‚                                         â”‚
â”‚  â”‚   API       â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**
- **Flask Application** (`app.py`) - ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
- **REST API Endpoints** - 12+ ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ğ¾Ğ²
- **WebSocket Server** - Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ
- **CORS Middleware** - ĞœĞµĞ¶ÑĞ°Ğ¹Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹

### **2. Ğ¡Ğ»Ğ¾Ğ¹ API Ğ¸ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (API Gateway Layer)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Gateway Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                Flask Route Registry                â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ GET  /api/health              â”‚ Health check      â”‚  â”‚
â”‚  â”‚ POST /api/telegram/auth       â”‚ Authentication    â”‚  â”‚
â”‚  â”‚ GET  /api/tasks               â”‚ List tasks        â”‚  â”‚
â”‚  â”‚ POST /api/tasks               â”‚ Create task       â”‚  â”‚
â”‚  â”‚ PUT  /api/tasks/{id}          â”‚ Update task       â”‚  â”‚
â”‚  â”‚ GET  /api/export/tasks.csv    â”‚ Export tasks      â”‚  â”‚
â”‚  â”‚ POST /api/llm/analyze/tasks   â”‚ LLM analysis      â”‚  â”‚
â”‚  â”‚ POST /api/users               â”‚ Create user       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Request Pipeline                      â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1. Request â†’ 2. CORS â†’ 3. Auth â†’ 4. Validation    â”‚  â”‚
â”‚  â”‚ 5. Business Logic â†’ 6. Response â†’ 7. Logging      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ”ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹ middleware:**
- `@require_auth` - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
- `@require_permission` - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² (ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ°)
- `@validate_request` - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Pydantic
- `@generate_response` - Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²

### **3. Ğ¡Ğ»Ğ¾Ğ¹ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ (Business Logic Layer)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Business Logic Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Authentication Service                â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ JWT token generation & validation               â”‚  â”‚
â”‚  â”‚ â€¢ User session management                         â”‚  â”‚
â”‚  â”‚ â€¢ Permission checking (simplified)                â”‚  â”‚
â”‚  â”‚ â€¢ Role-based access control                       â”‚  â”‚
â”‚  â”‚ â€¢ Telegram username validation                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                Task Management                      â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ CRUD operations for tasks                        â”‚  â”‚
â”‚  â”‚ â€¢ Filtering, sorting, pagination                   â”‚  â”‚
â”‚  â”‚ â€¢ Tag management                                   â”‚  â”‚
â”‚  â”‚ â€¢ Assignment tracking                              â”‚  â”‚
â”‚  â”‚ â€¢ Deadline calculations                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Data Analysis (LLM)                    â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Productivity metrics                             â”‚  â”‚
â”‚  â”‚ â€¢ Bottleneck detection                             â”‚  â”‚
â”‚  â”‚ â€¢ Team performance analysis                        â”‚  â”‚
â”‚  â”‚ â€¢ Predictive analytics                             â”‚  â”‚
â”‚  â”‚ â€¢ Demo mode with sample data                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                User Management                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ User registration & profile                      â”‚  â”‚
â”‚  â”‚ â€¢ Role assignment                                 â”‚  â”‚
â”‚  â”‚ â€¢ Activity tracking                               â”‚  â”‚
â”‚  â”‚ â€¢ Department management                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **4. Ğ¡Ğ»Ğ¾Ğ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Data Layer)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Access Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚             CSV Data Manager (Thread-safe)         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Thread locking for safe concurrent access       â”‚  â”‚
â”‚  â”‚ â€¢ Schema validation                               â”‚  â”‚
â”‚  â”‚ â€¢ Automatic ID generation                         â”‚  â”‚
â”‚  â”‚ â€¢ Timestamp management                            â”‚  â”‚
â”‚  â”‚ â€¢ Batch operations                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       â–¼                                             â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚  Users   â”‚  â”‚  Tasks   â”‚  â”‚  Events  â”‚  â”‚ Docs â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ Manager  â”‚  â”‚ Manager  â”‚  â”‚ Manager  â”‚  â”‚Managerâ”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚       â”‚             â”‚              â”‚          â”‚     â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ users.csv â”‚ â”‚ tasks.csv â”‚ â”‚events.csv â”‚ â”‚docs.csvâ”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                Cache Layer                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Redis (primary)                                 â”‚  â”‚
â”‚  â”‚ â€¢ In-memory fallback                              â”‚  â”‚
â”‚  â”‚ â€¢ TTL-based expiration                            â”‚  â”‚
â”‚  â”‚ â€¢ Cache key generation                            â”‚  â”‚
â”‚  â”‚ â€¢ Session storage                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **5. Ğ¡Ğ»Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Configuration & Infrastructure Layer                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Configuration Manager                   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ YAML file loading                               â”‚  â”‚
â”‚  â”‚ â€¢ Environment variable substitution               â”‚  â”‚
â”‚  â”‚ â€¢ Hierarchical configuration                      â”‚  â”‚
â”‚  â”‚ â€¢ Default values                                  â”‚  â”‚
â”‚  â”‚ â€¢ Feature toggles                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Logging System                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ Rotating file logs                              â”‚  â”‚
â”‚  â”‚ â€¢ Console output                                  â”‚  â”‚
â”‚  â”‚ â€¢ Log levels (DEBUG, INFO, WARN, ERROR)          â”‚  â”‚
â”‚  â”‚ â€¢ Structured logging                              â”‚  â”‚
â”‚  â”‚ â€¢ Log retention policies                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Monitoring & Health                   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ /api/health endpoint                            â”‚  â”‚
â”‚  â”‚ â€¢ Component status checks                         â”‚  â”‚
â”‚  â”‚ â€¢ Performance metrics                             â”‚  â”‚
â”‚  â”‚ â€¢ Uptime tracking                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

```mermaid
sequenceDiagram
    participant Client as Web Client
    participant Flask as Flask App
    participant Auth as Auth Manager
    participant Cache as Cache Manager
    participant CSV as CSV Manager
    participant Socket as SocketIO
    participant LLM as LLM Service

    Note over Client,LLM: 1. ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    Client->>Flask: POST /api/telegram/auth
    Flask->>Auth: authenticate_user()
    Auth->>CSV: find_user()
    CSV-->>Auth: user_data
    Auth->>Auth: generate_tokens()
    Auth->>Cache: store_session()
    Auth-->>Flask: tokens + user_info
    Flask-->>Client: 200 OK + tokens
    
    Note over Client,LLM: 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
    Client->>Flask: POST /api/tasks (Bearer token)
    Flask->>Auth: validate_token()
    Auth->>Cache: check_session()
    Cache-->>Auth: session_data
    Auth-->>Flask: user_info
    Flask->>Flask: validate_request(TaskCreate)
    Flask->>CSV: insert_task()
    CSV-->>Flask: created_task
    Flask->>Socket: emit(TASK_CREATED)
    Socket-->>Client: WebSocket event
    Flask-->>Client: 201 Created
    
    Note over Client,LLM: 3. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¿Ğ¸ÑĞºĞ° Ğ·Ğ°Ğ´Ğ°Ñ‡
    Client->>Flask: GET /api/tasks?status=todo
    Flask->>Auth: validate_token()
    Auth-->>Flask: user_info
    Flask->>Cache: get(tasks_filter:...)
    alt Cache Hit
        Cache-->>Flask: cached_data
    else Cache Miss
        Flask->>CSV: read_all_tasks()
        CSV-->>Flask: all_tasks
        Flask->>Flask: filter_tasks()
        Flask->>Cache: set(tasks_filter:...)
    end
    Flask-->>Client: 200 OK + tasks
    
    Note over Client,LLM: 4. Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    Client->>Flask: GET /api/export/tasks.csv
    alt Export allowed for all
        Flask->>CSV: read_all_tasks()
        CSV-->>Flask: tasks_data
        Flask->>Flask: generate_csv()
        Flask-->>Client: CSV file
    else Requires auth
        Flask->>Auth: validate_token()
        Auth-->>Flask: user_info
        Note over Flask: Check permission can_export
        Flask->>CSV: read_all_tasks()
        CSV-->>Flask: tasks_data
        Flask-->>Client: CSV file
    end
    
    Note over Client,LLM: 5. LLM Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·
    Client->>Flask: POST /api/llm/analyze/tasks
    Flask->>Auth: validate_token()
    Auth-->>Flask: user_info
    Flask->>Auth: check_llm_quota()
    Auth-->>Flask: quota_info
    Flask->>LLM: analyze_tasks()
    LLM-->>Flask: demo_analysis_data
    Flask-->>Client: 200 OK + analysis
```

## ğŸ“ ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
task_management_system/
â”œâ”€â”€ modules/                          # ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸
â”‚   â”œâ”€â”€ __init__.py                   # ĞŸĞ°ĞºĞµÑ‚ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹
â”‚   â”œâ”€â”€ constants.py                  # ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
â”‚   â”‚   â”œâ”€â”€ SystemConstants           # Ğ’ÑĞµ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ ROLES, TASK_STATUSES      # ĞŸĞµÑ€ĞµÑ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ CSV_PATHS                 # ĞŸÑƒÑ‚Ğ¸ Ğº Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼
â”‚   â”‚   â””â”€â”€ SCHEMAS                   # CSV ÑÑ…ĞµĞ¼Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ models.py                     # Pydantic Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”‚   â”‚   â”œâ”€â”€ UserBase, UserCreate      # ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
â”‚   â”‚   â”œâ”€â”€ TaskBase, TaskCreate      # ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡
â”‚   â”‚   â”œâ”€â”€ AuthRequest, AuthResponse # ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â”œâ”€â”€ TaskUpdate                # ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
â”‚   â”‚   â””â”€â”€ LLMAnalysisRequest        # ĞœĞ¾Ğ´ĞµĞ»ÑŒ LLM Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
â”‚   â”‚
â”‚   â”œâ”€â”€ config_manager.py             # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ĞµĞ¹
â”‚   â”‚   â”œâ”€â”€ ConfigManager             # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ°ÑÑ
â”‚   â”‚   â”œâ”€â”€ _load_config()            # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ· YAML
â”‚   â”‚   â”œâ”€â”€ _replace_env_vars()       # Ğ—Ğ°Ğ¼ĞµĞ½Ğ° Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ get()                     # ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â””â”€â”€ is_security_enabled()     # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ csv_manager.py                # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ CSV
â”‚   â”‚   â”œâ”€â”€ CSVDataManager            # ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¾Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€
â”‚   â”‚   â”œâ”€â”€ read_all(), write_all()   # Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ/Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ
â”‚   â”‚   â”œâ”€â”€ find(), find_one()        # ĞŸĞ¾Ğ¸ÑĞº
â”‚   â”‚   â”œâ”€â”€ insert()                  # Ğ’ÑÑ‚Ğ°Ğ²ĞºĞ°
â”‚   â”‚   â”œâ”€â”€ update()                  # ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
â”‚   â”‚   â””â”€â”€ delete()                  # Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ
â”‚   â”‚
â”‚   â”œâ”€â”€ cache_manager.py              # ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
â”‚   â”‚   â”œâ”€â”€ CacheManager              # ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ĞºÑÑˆĞ°
â”‚   â”‚   â”œâ”€â”€ get(), set(), delete()    # ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â”œâ”€â”€ generate_key()            # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ»ÑÑ‡ĞµĞ¹
â”‚   â”‚   â””â”€â”€ Redis + in-memory fallback
â”‚   â”‚
â”‚   â”œâ”€â”€ auth_manager.py               # ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ AuthManager               # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ°ÑÑ
â”‚   â”‚   â”œâ”€â”€ authenticate_user()       # ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ validate_token()          # Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ refresh_access_token()    # ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ check_permission()        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ²
â”‚   â”‚   â”œâ”€â”€ get_user_llm_quota()      # ĞšĞ²Ğ¾Ñ‚Ñ‹ LLM
â”‚   â”‚   â””â”€â”€ logout()                  # Ğ’Ñ‹Ñ…Ğ¾Ğ´ Ğ¸Ğ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ decorators.py                 # Ğ”ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ¸ middleware
â”‚   â”‚   â”œâ”€â”€ require_auth()            # Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â”œâ”€â”€ require_permission()      # Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ²
â”‚   â”‚   â”œâ”€â”€ validate_request()        # Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
â”‚   â”‚   â””â”€â”€ generate_response()       # Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²
â”‚   â”‚
â”‚   â”œâ”€â”€ websocket.py                  # WebSocket Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸
â”‚   â”‚   â”œâ”€â”€ WebSocketHandler          # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ°ÑÑ
â”‚   â”‚   â”œâ”€â”€ handle_connect()          # ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
â”‚   â”‚   â”œâ”€â”€ handle_subscribe()        # ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° ĞºĞ°Ğ½Ğ°Ğ»Ñ‹
â”‚   â”‚   â””â”€â”€ handle_disconnect()       # ĞÑ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
â”‚   â”‚
â”‚   â”œâ”€â”€ utils.py                      # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ initialize_sample_data()  # Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â””â”€â”€ Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
â”‚   â”‚
â”‚   â””â”€â”€ api/                          # API endpoints
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ auth.py                   # ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ API
â”‚       â”‚   â”œâ”€â”€ AuthAPI               # ĞšĞ»Ğ°ÑÑ API
â”‚       â”‚   â”œâ”€â”€ telegram_auth_endpoint()
â”‚       â”‚   â”œâ”€â”€ refresh_token_endpoint()
â”‚       â”‚   â””â”€â”€ logout_endpoint()
â”‚       â”‚
â”‚       â”œâ”€â”€ tasks.py                  # Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ API
â”‚       â”‚   â”œâ”€â”€ TasksAPI              # ĞšĞ»Ğ°ÑÑ API
â”‚       â”‚   â”œâ”€â”€ get_tasks_endpoint()
â”‚       â”‚   â”œâ”€â”€ create_task_endpoint()
â”‚       â”‚   â””â”€â”€ update_task_endpoint()
â”‚       â”‚
â”‚       â”œâ”€â”€ users.py                  # ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ API
â”‚       â”‚   â”œâ”€â”€ UsersAPI              # ĞšĞ»Ğ°ÑÑ API
â”‚       â”‚   â””â”€â”€ create_user_endpoint()
â”‚       â”‚
â”‚       â”œâ”€â”€ export.py                 # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ API
â”‚       â”‚   â”œâ”€â”€ ExportAPI             # ĞšĞ»Ğ°ÑÑ API
â”‚       â”‚   â””â”€â”€ export_tasks_csv_endpoint()
â”‚       â”‚
â”‚       â””â”€â”€ llm.py                    # LLM API
â”‚           â”œâ”€â”€ LLMAPI                # ĞšĞ»Ğ°ÑÑ API
â”‚           â””â”€â”€ analyze_tasks_llm_endpoint()
â”‚
â”œâ”€â”€ tests/                           # Ğ¢ĞµÑÑ‚Ñ‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_constants.py            # Ğ¢ĞµÑÑ‚Ñ‹ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚
â”‚   â”œâ”€â”€ test_config_manager.py       # Ğ¢ĞµÑÑ‚Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ test_csv_manager.py          # Ğ¢ĞµÑÑ‚Ñ‹ CSV Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ°
â”‚   â”œâ”€â”€ test_auth_manager.py         # Ğ¢ĞµÑÑ‚Ñ‹ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ test_models.py               # Ğ¢ĞµÑÑ‚Ñ‹ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”œâ”€â”€ test_decorators.py           # Ğ¢ĞµÑÑ‚Ñ‹ Ğ´ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²
â”‚   â”œâ”€â”€ test_api_auth.py             # Ğ¢ĞµÑÑ‚Ñ‹ API Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ test_api_tasks.py            # Ğ¢ĞµÑÑ‚Ñ‹ API Ğ·Ğ°Ğ´Ğ°Ñ‡
â”‚   â”œâ”€â”€ test_integration.py          # Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹
â”‚   â””â”€â”€ run_tests.py                 # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… Ñ‚ĞµÑÑ‚Ğ¾Ğ²
â”‚
â”œâ”€â”€ data/                            # Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ (CSV Ñ„Ğ°Ğ¹Ğ»Ñ‹)
â”‚   â”œâ”€â”€ users.csv                    # ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸
â”‚   â”œâ”€â”€ tasks.csv                    # Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸
â”‚   â”œâ”€â”€ events.csv                   # Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
â”‚   â””â”€â”€ docs.csv                     # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
â”‚
â”œâ”€â”€ logs/                            # Ğ›Ğ¾Ğ³Ğ¸
â”‚   â””â”€â”€ task_system.log              # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ»Ğ¾Ğ³ Ñ„Ğ°Ğ¹Ğ»
â”‚
â”œâ”€â”€ config.yaml                      # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ .env                             # ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
â”œâ”€â”€ requirements.txt                 # Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”œâ”€â”€ app.py                           # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„Ğ°Ğ¹Ğ» Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â””â”€â”€ README.md                        # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### ĞŸĞ¾Ñ‚Ğ¾Ğº ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:

```
1. ĞšĞ»Ğ¸ĞµĞ½Ñ‚ â†’ POST /api/tasks (JSON + Bearer Token)
2. Flask â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° CORS
3. Ğ”ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€ @require_auth â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¾ĞºĞµĞ½Ğ°
4. Ğ”ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€ @validate_request â†’ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Pydantic
5. TasksAPI.create_task_endpoint():
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ assignee
   - Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ task_id
   - ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ CSV
   - CSVManager.insert()
   - WebSocket.emit(TASK_CREATED)
6. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
7. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ
```

### ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸:

```
1. ĞšĞ»Ğ¸ĞµĞ½Ñ‚ â†’ POST /api/telegram/auth (telegram_username)
2. Flask â†’ @validate_request
3. AuthAPI.telegram_auth_endpoint():
   - AuthManager.authenticate_user()
   - ĞŸĞ¾Ğ¸ÑĞº Ğ² CSVManager
   - Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ â†’ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
   - Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²
   - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑĞµÑÑĞ¸Ğ¸ Ğ² CacheManager
   - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Flask session
4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ
```

## ğŸ¯ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

### 1. **ĞœĞ½Ğ¾Ğ³Ğ¾ÑĞ»Ğ¾Ğ¹Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°**
- Presentation Layer (API Gateway)
- Business Logic Layer (Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹)
- Data Access Layer (ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ñ‹)
- Infrastructure Layer (ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ, Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)

### 2. **ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ (SRP)**
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ·Ğ° Ğ¾Ğ´Ğ½Ñƒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
- Ğ§ĞµÑ‚ĞºĞ¾Ğµ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹, Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¾Ğ¹, Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸

### 3. **Ğ”ĞµĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ² Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğµ)**
- ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ API Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸
- Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ²Ñ‹Ğ½Ğ¾ÑĞ° Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

### 4. **Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**
- Redis ĞºĞ°Ğº Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºÑÑˆ
- In-memory fallback
- Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ»ÑÑ‡ĞµĞ¹ ĞºÑÑˆĞ°
- TTL Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 5. **Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ**
- JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ (access + refresh)
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Pydantic)
- Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ CSRF (CORS Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸)
- Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ² Ğ² Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

### 6. **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ**
- ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¾Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº CSV
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ½Ğ°Ğ±Ğ¾Ñ€Ğ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- WebSocket Ğ´Ğ»Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹

## ğŸ“Š Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ (users.csv):
```csv
telegram_username,full_name,role,is_active,registered_at,last_login,email,department
@admin_ivan,Ğ˜Ğ²Ğ°Ğ½ ĞŸĞµÑ‚Ñ€Ğ¾Ğ²,admin,True,2024-01-15 10:30:00,2024-01-20 14:25:00,ivan@company.com,IT
@developer_alex,ĞĞ»ĞµĞºÑĞµĞ¹ ĞšĞ¾Ğ·Ğ»Ğ¾Ğ²,member,True,2024-01-16 09:15:00,2024-01-20 16:40:00,alex@company.com,Development
```

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ (tasks.csv):
```csv
task_id,title,description,status,assignee,creator,created_at,updated_at,due_date,completed_at,priority,tags
101,Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° REST API,Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ API endpoints,in_progress,@developer_alex,@manager_anna,2024-01-18 11:00:00,2024-01-19 15:30:00,2024-01-25,,high,["backend","api","priority"]
102,Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ³,ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğ¸,done,@developer_alex,@admin_ivan,2024-01-17 14:20:00,2024-01-18 10:15:00,2024-01-18,2024-01-18 10:15:00,urgent,["bug","critical"]
```

## ğŸ”§ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹

### Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ:
- `security.enabled`: Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ/Ğ²Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
- `security.session_timeout_hours`: Ğ’Ñ€ĞµĞ¼Ñ Ğ¶Ğ¸Ğ·Ğ½Ğ¸ ÑĞµÑÑĞ¸Ğ¸
- `security.rate_limiting`: ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:
- `performance.cache_enabled`: Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ĞºÑÑˆĞ°
- `performance.cache_ttl_seconds`: Ğ’Ñ€ĞµĞ¼Ñ Ğ¶Ğ¸Ğ·Ğ½Ğ¸ ĞºÑÑˆĞ°
- `performance.csv_read_batch_size`: Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¿Ğ°ĞºĞµÑ‚Ğ° Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ

### Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚:
- `export.allow_all`: Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ¸Ñ‚ÑŒ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ²ÑĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼
- `export.max_export_records`: ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ Ğ´Ğ»Ñ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ°

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ¢Ğ¸Ğ¿Ñ‹ Ñ‚ĞµÑÑ‚Ğ¾Ğ²:
1. **Unit Ñ‚ĞµÑÑ‚Ñ‹** - ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸
2. **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹** - Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹
3. **API Ñ‚ĞµÑÑ‚Ñ‹** - HTTP endpoints
4. **Ğ¢ĞµÑÑ‚Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** - CSV Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

### Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²:
```bash
# Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹
python tests/run_tests.py

# ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹
python -m pytest tests/test_csv_manager.py -v
python -m pytest tests/test_auth_manager.py::TestAuthManager::test_authenticate_user
```

## ğŸš€ Ğ Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°:
```bash
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
pip install -r requirements.txt

# ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
cp .env.example .env
# Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞµĞ¼ .env Ñ„Ğ°Ğ¹Ğ»

# Ğ—Ğ°Ğ¿ÑƒÑĞº Redis
docker run -d -p 6379:6379 redis

# Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ°
python app.py
```

### ĞŸÑ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:
```yaml
server:
  host: 0.0.0.0
  port: 8080
  ssl_enabled: true
  max_connections: 10000
  debug: false

logging:
  level: WARNING
  file_path: /var/log/task_system/app.log
  max_size_mb: 1000
  retention_days: 90
```

## ğŸ“ˆ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

### Health check (`/api/health`):
```json
{
  "status": "healthy",
  "components": {
    "flask": "running",
    "csv_storage": "ok",
    "cache": "enabled",
    "llm": "demo-mode"
  },
  "metrics": {
    "users_count": 45,
    "tasks_count": 120,
    "uptime_seconds": 86400
  }
}
```

### Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:
- Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸: DEBUG, INFO, WARNING, ERROR
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ¿Ğ¾ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñƒ Ğ¸ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°

## ğŸ”„ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client  â”‚ â†’ â”‚  Flask   â”‚ â†’ â”‚ Middleware  â”‚ â†’ â”‚  Service  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   App    â”‚   â”‚  (Auth,     â”‚   â”‚  Layer    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ Validation) â”‚   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                   â†‘         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
              Response            â†‘                  â”‚
                   â†‘         Business Logic          â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ JSON/   â”‚ â† â”‚   Cache     â”‚ â† â”‚ Data Layerâ”‚
              â”‚ CSV/    â”‚   â”‚   Layer     â”‚   â”‚  (CSV)    â”‚
              â”‚ WebSocketâ”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Ğ­Ñ‚Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°ĞµÑ‚:
- **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ
- **ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ñ‡Ğ¸ÑÑ‚Ñ‹Ğ¹ ĞºĞ¾Ğ´
- **Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· JWT Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
- **ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· Redis Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- **Ğ“Ğ¸Ğ±ĞºĞ¾ÑÑ‚ÑŒ** Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹